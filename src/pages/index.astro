---
import Layout from "../layouts/Layout.astro";
import GameList from "../components/games/Card.jsx";

import Slider from "../components/games/Slider.jsx";
import { allGames } from "../services/games";
import games from "../utils/bestGames.json";
import { htmlToText } from "../utils/formatHTMLToString.js";

const resGames = await allGames();

const bestGames = games.map((game) => {
  return {
    id: game.id,
    name: game.name,
    description: htmlToText(game.description).slice(0, 250) + "...",
    background_image: game.background_image,
    plataformas: game.platforms,
  };
});
---

<Layout>
  <Slider client:load games={bestGames} />
  <GameList client:load allGames={resGames} />
</Layout>
